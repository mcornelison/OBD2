# B-008: Update Data Retention to 1 Year

| Field        | Value         |
|--------------|---------------|
| Priority     | Low           |
| Status       | Pending       |
| Category     | database      |
| Size         | S             |
| Related PRD  | None          |
| Dependencies | None          |
| Created      | 2026-01-25    |

## Description

Increase `realtime_data` retention period from 7 days to 365 days. The 7-day default is too short because the vehicle may be stored for months (winter). Pi 5 has 128GB storage -- 1 year of data is approximately 65MB, well within capacity.

## Acceptance Criteria

- [ ] Default retention is 365 days in `config.json`
- [ ] Retention is configurable via `config.json`
- [ ] Data cleanup routine respects the new retention period
- [ ] `specs/architecture.md` updated (was "7 days")
- [ ] `specs/samples/piSpecs.md` updated (was "7 days or 100MB max")

## Validation Script Requirements

- **Input**: Set retention to 365 in config, insert test records with timestamps spanning 400 days
- **Expected Output**: Cleanup routine deletes records older than 365 days, keeps records within 365 days
- **Database State**: `realtime_data` table retains records within retention window
- **Test Program**: Write a test that inserts records with old timestamps, runs the cleanup function, and verifies correct records remain

## Notes

Storage estimation: 3,600 readings/hr * 50 bytes * 365 days = ~65MB. No risk of storage exhaustion on 128GB SD card.
