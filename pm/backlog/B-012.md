# B-012: Pi 5 Initial Setup and Configuration

| Field        | Value         |
|--------------|---------------|
| Priority     | High          |
| Status       | Complete      |
| Category     | deployment    |
| Size         | M             |
| Related PRD  | None (CIO manual task) |
| Dependencies | None          |
| Created      | 2026-01-29    |

## Description

The Raspberry Pi 5 with OSOYOO 3.5" HDMI touch screen is now available. No Geekworm X1209 UPS power unit yet (will run on standard power for now). Need to perform initial OS setup, configure SSH access, set up networking, and prepare the Pi as a deployment target.

**This is a CIO hands-on task, not Ralph work.** The existing `scripts/pi_setup.sh` handles software setup after OS installation.

## Step-by-Step Checklist

### Phase 1: OS Installation (CIO at desk with Pi)

- [ ] Download Raspberry Pi OS (64-bit, Bookworm) using Raspberry Pi Imager
- [ ] In Imager advanced settings, pre-configure:
  - Hostname: **chi-eclipse-tuner** (display name: EclipseTuner)
  - Enable SSH with password authentication
  - WiFi SSID: **DeathStarWiFi** and password (home network)
  - Username and password
  - Timezone and locale
- [ ] Flash to microSD card (128GB A2 U3/V30)
- [ ] Insert microSD, connect HDMI touch screen, connect USB-C power
- [ ] Boot and verify Pi OS desktop appears on the OSOYOO display

### Phase 2: Network and SSH Access (CIO from Windows)

- [ ] Verify Pi IP address is `10.27.27.28` (static assignment or DHCP reservation on DeathStarWiFi)
- [ ] SSH from Windows: `ssh mcornelison@10.27.27.28` (or IP address)
- [ ] Set up SSH key authentication:
  - Copy key: `ssh-copy-id -i ~/.ssh/id_rsa.pub mcornelison@10.27.27.28`
  - Verify passwordless login works
- [ ] Record connection details in a secure location:
  - Hostname, IP, username, SSH port, key location
- [ ] Update `deploy/deploy.conf` with actual Pi connection details

### Phase 3: Software Prerequisites (run on Pi via SSH)

- [ ] Verify Python version: `python3 --version` (must be 3.11+)
- [ ] Verify pip: `pip3 --version`
- [ ] Verify venv: `python3 -m venv --help`
- [ ] Verify SQLite: `python3 -c "import sqlite3; print(sqlite3.sqlite_version)"`
- [ ] Verify Git: `git --version`
- [ ] Run `sudo scripts/pi_setup.sh` (installs system deps, I2C, directories, venv, Python deps)
- [ ] Verify pi_setup.sh completed without errors

### Phase 4: Display Verification (CIO at Pi)

- [ ] HDMI touch screen displays Pi OS desktop at 480x320
- [ ] Touch input responds (tap, drag)
- [ ] If display resolution is wrong, configure via `raspi-config` > Display Options
- [ ] Note: pygame display driver configuration is separate (B-007)

### Phase 5: Post-Setup Verification (CIO from Windows)

- [ ] SSH works: `ssh mcornelison@10.27.27.28`
- [ ] Run platform check: `python3 scripts/check_platform.py`
- [ ] Run hardware verification: `python3 scripts/verify_hardware.py`
- [ ] Check disk space: `df -h` (should have >100GB free on 128GB card)
- [ ] Check RAM: `free -m` (should show ~8GB total)

## Acceptance Criteria

- [ ] Raspberry Pi OS (64-bit) installed and booting
- [ ] SSH access configured and working from Windows dev machine (key-based)
- [ ] WiFi networking configured (home network)
- [ ] HDMI touch screen displaying correctly (480x320)
- [ ] Python 3.11+ installed and verified
- [ ] pip and venv available
- [ ] SQLite3 available (bundled with Python)
- [ ] Git installed
- [ ] Hostname, timezone, and locale configured
- [ ] `deploy/deploy.conf` updated with actual Pi connection details
- [ ] `scripts/pi_setup.sh` run successfully

## Existing Infrastructure

These scripts already exist and should be used during setup:

| Script | Purpose | When to Run |
|--------|---------|-------------|
| `scripts/pi_setup.sh` | System deps, I2C, venv, Python deps, directories | Phase 3 (sudo) |
| `scripts/check_platform.py` | Verify Pi platform detection | Phase 5 |
| `scripts/verify_hardware.py` | Verify I2C, UPS HAT, GPIO | Phase 5 |
| `deploy/deploy.conf.example` | Template for Pi connection config | Copy to `deploy/deploy.conf` in Phase 2 |

## Notes

- Power unit (Geekworm X1209 UPS HAT) is not yet available. The Pi will run on standard USB-C power. Power management features (B-007, orchestration shutdown stories) will be deferred until the UPS HAT arrives.
- The OSOYOO 3.5" display uses standard HDMI -- no special driver needed for basic display. Touch input uses USB HID. Pygame integration is Phase 6 (B-007).
- Bluetooth dongle pairing is not part of this task -- that's covered by B-014 (Pi Testing).
